<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="mrone.teamone.mapper.MROApprovalNSB">
   <select id="getApprovalOrderList" parameterType="string" resultType="intranet.teamone.bean.OrderBean">
   SELECT  
    CHLCHL.ORDERS.OS_CODE, CHLCHL.ORDERS.OS_CLCODE, CHLCHL.ORDERS.OS_DATE, CHLCHL.ORDERS.OS_STATE, CHLCHL.CLIENT.CL_NAME, CHLCHL.ORDERSDETAIL.OD_PRCODE, CHLCHL.ORDERSDETAIL.OD_QUANTITY, CHLCHL.PRODUCT.PR_PRICE, CHLCHL.PRODUCT.PR_TAX, CHLCHL.PRODUCT.PR_NAME 
   FROM CHLCHL.ORDERS, CHLCHL.ORDERSDETAIL, CHLCHL.CLIENT,CHLCHL.PRODUCT 
   WHERE  CHLCHL.ORDERS.OS_CLCODE = #{ofcode} AND  CHLCHL.ORDERS.OS_STATE = 'OC' AND  CHLCHL.ORDERS.OS_CLCODE = CHLCHL.CLIENT.CL_CODE  AND  CHLCHL.ORDERS.OS_CODE = CHLCHL.ORDERSDETAIL.OD_OSCODE AND CHLCHL.ORDERSDETAIL.OD_PRCODE = CHLCHL.PRODUCT.PR_CODE 
   ORDER BY CHLCHL.ORDERS.OS_CODE
    </select>

   <select id="inputOrder" parameterType="string" resultType="intranet.teamone.bean.OrderBean">
    SELECT  
    CHLCHL.ORDERS.OS_CODE, CHLCHL.ORDERS.OS_CLCODE, CHLCHL.ORDERS.OS_DATE, CHLCHL.ORDERS.OS_STATE, CHLCHL.CLIENT.CL_NAME, CHLCHL.ORDERSDETAIL.OD_PRCODE, CHLCHL.ORDERSDETAIL.OD_QUANTITY, CHLCHL.PRODUCT.PR_PRICE, CHLCHL.PRODUCT.PR_TAX, CHLCHL.PRODUCT.PR_NAME 
   FROM CHLCHL.ORDERS, CHLCHL.ORDERSDETAIL, CHLCHL.CLIENT,CHLCHL.PRODUCT 
   WHERE  CHLCHL.ORDERS.OS_CODE = #{oscode} AND  CHLCHL.ORDERS.OS_STATE != 'RR' AND  CHLCHL.ORDERS.OS_CLCODE = CHLCHL.CLIENT.CL_CODE  AND  CHLCHL.ORDERS.OS_CODE = CHLCHL.ORDERSDETAIL.OD_OSCODE AND CHLCHL.ORDERSDETAIL.OD_PRCODE = CHLCHL.PRODUCT.PR_CODE 
   ORDER BY CHLCHL.ORDERS.OS_CODE
    </select>

   <select id="getIssuedTax" parameterType="string" resultType="intranet.teamone.bean.TaxBean">
	SELECT  
	CHLCHL.TAXBILL.TB_CODE, 
	CHLCHL.TAXBILL.TB_OSCODE, 
	CHLCHL.TAXBILL.TB_CLCODE, 
	CHLCHL.TAXBILL.TB_CLNAME 
	FROM CHLCHL.TAXBILL 
	WHERE CHLCHL.TAXBILL.TB_CLCODE = #{ofcode} 
    </select>
    
    <select id="getIssuedTaxDetail"  parameterType="string" resultType="intranet.teamone.bean.TaxBean">
    SELECT  
	CHLCHL.TAXBILL.TB_CODE, 
    CHLCHL.TAXBILL.TB_OSCODE, 
    CHLCHL.TAXBILL.TB_SPCODE, 
    CHLCHL.TAXBILL.TB_SPNAME, 
    CHLCHL.TAXBILL.TB_SPADDRESS, 
    CHLCHL.TAXBILL.TB_SPBTYPE, 
    CHLCHL.TAXBILL.TB_SPCORPNUM, 
    CHLCHL.TAXBILL.TB_SPBKIND, 
    CHLCHL.TAXBILL.TB_CLCODE, 
    CHLCHL.TAXBILL.TB_CLCORPNUM, 
    CHLCHL.TAXBILL.TB_CLNAME, 
    CHLCHL.TAXBILL.TB_CLADDRESS, 
    CHLCHL.TAXBILL.TB_CLBTYPE, 
    CHLCHL.TAXBILL.TB_CLBKIND, 
    CHLCHL.TAXBILL.TB_DATE, 
    CHLCHL.TAXBILL.TB_PRICE, 
    CHLCHL.TAXBILL.TB_TAX, 
    CHLCHL.TAXBILL.TB_TTPRICE, 
    CHLCHL.TAXBILL.TB_SPEMAIL, 
    CHLCHL.TAXBILL.TB_CLEMAIL, 
    CHLCHL.TAXBILL.TB_STCODE, 
    CHLCHL.BTYPE.BT_NAME AS SPBTNAME, 
    CHLCHL.BKIND.BK_NAME AS SPBKNAME, 
    CHLCHL.CLBTYPE.CLBT_NAME AS CLBTNAME, 
    CHLCHL.CLBKIND.CLBK_NAME AS CLBKNAME 
	FROM CHLCHL.TAXBILL INNER JOIN CHLCHL.BTYPE ON CHLCHL.TAXBILL.TB_SPBTYPE = CHLCHL.BTYPE.BT_CODE 
            INNER JOIN CHLCHL.BKIND ON CHLCHL.TAXBILL.TB_SPBKIND = CHLCHL.BKIND.BK_CODE 
            INNER JOIN CHLCHL.CLBTYPE ON CHLCHL.TAXBILL.TB_CLBTYPE = CHLCHL.CLBTYPE.CLBT_CODE 
            INNER JOIN CHLCHL.CLBKIND ON CHLCHL.TAXBILL.TB_CLBKIND = CHLCHL.CLBKIND.CLBK_CODE 
	WHERE  CHLCHL.TAXBILL.TB_CODE = #{tbcode} 
    </select>
    
    <select id="getTaxProduct"  parameterType="string" resultType="intranet.teamone.bean.OrderDetailBean">
    SELECT 
	CHLCHL.ORDERSDETAIL.OD_PRSPCODE, 
	CHLCHL.ORDERSDETAIL.OD_OSCODE, 
	CHLCHL.ORDERSDETAIL.OD_STCODE, 
	CHLCHL.ORDERSDETAIL.OD_PRCODE, 
	CHLCHL.ORDERSDETAIL.OD_QUANTITY, 
	CHLCHL.PRODUCT.PR_NAME, 
	CHLCHL.PRODUCT.PR_PRICE, 
	CHLCHL.PRODUCT.PR_TAX 
	FROM CHLCHL.ORDERSDETAIL INNER JOIN CHLCHL.PRODUCT ON CHLCHL.ORDERSDETAIL.OD_PRCODE = CHLCHL.PRODUCT.PR_CODE 
	WHERE CHLCHL.ORDERSDETAIL.OD_OSCODE = #{oscode} 
    </select>

</mapper>